<!DOCTYPE html>
 <html>
 	<head>
 		<meta charset="utf-8">
 		<meta http-equiv="X-UA-Compatible" content="IE=edge">
 		<title></title>
 		<meta name="description" content=" " />
 		<meta name="author" content=" " />
 		<meta name="HandheldFriendly" content="true" />
 		<meta name="MobileOptimized" content="320" />
 		<!-- Use maximum-scale and user-scalable at your own risk. It disables pinch/zoom. Think about usability/accessibility before including.-->
 		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
 		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
 		<link rel="stylesheet" type="text/css" href=" ">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.dev.js" ></script>
 	</head>
 	<body>
 		<h1>How to control the world!</h1>
    <input id="ip" type="text" value="192.168.0.102:3000" /><input id="connect" type="button" value="Connect" /><br />
 		<input id="light-on" type="button" value="Light On" />
    <input id="light-off" type="button" value="Light Off" />
    <input id="water-on" type="button" value="Water On" />

    <script>
    /* TODO: Read up on: */
    // http://markdalgleish.com/2011/03/self-executing-anonymous-functions/

    (function(window, document, undefined){

      let socket = null

      // get the UI elements
      let connectButton = document.getElementById('connect')
      let ipInput = document.getElementById('ip')

      connectButton.addEventListener('click', function(){
        let ip = ipInput.value
        socket = io(ip)
      })

      // actions
      let lightOnButton = document.getElementById('light-on')
      let lightOffButton = document.getElementById('light-off')
      let waterOnButton = document.getElementById('water-on')

      lightOnButton.addEventListener('click', function(){
        socket.emit('hardware', {type: 'light-on'});
      })

      lightOffButton.addEventListener('click', function(){
        socket.emit('hardware', {type: 'light-off'});
      })

      waterOnButton.addEventListener('click', function(){
        socket.emit('hardware', {type: 'water-on', duration: 10});
      })

    })(window, document);

    </script>
 	</body>
 </html>
